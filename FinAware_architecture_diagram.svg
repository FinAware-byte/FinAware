<svg width="1400" height="900" viewBox="0 0 1400 900" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font: 700 28px Arial, sans-serif; fill: #0f172a; }
      .subtitle { font: 500 14px Arial, sans-serif; fill: #334155; }
      .label { font: 600 14px Arial, sans-serif; fill: #0f172a; }
      .text { font: 500 12px Arial, sans-serif; fill: #1e293b; }
      .box { fill: #ffffff; stroke: #cbd5e1; stroke-width: 1.5; rx: 12; }
      .core { fill: #eff6ff; stroke: #3b82f6; stroke-width: 2; rx: 12; }
      .data { fill: #f8fafc; stroke: #64748b; stroke-width: 1.5; rx: 12; }
      .ext { fill: #f0fdf4; stroke: #22c55e; stroke-width: 1.5; rx: 12; }
      .warn { fill: #fff7ed; stroke: #f97316; stroke-width: 1.5; rx: 12; }
      .line { stroke: #64748b; stroke-width: 1.5; marker-end: url(#arrow); fill: none; }
    </style>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <path d="M0,0 L10,3 L0,6 Z" fill="#64748b" />
    </marker>
  </defs>

  <text x="40" y="50" class="title">FinAware — Service Architecture (Prototype)</text>
  <text x="40" y="75" class="subtitle">Next.js 14 App Router + Prisma (SQLite) + AI + PDF + WhatsApp Click-to-Chat</text>

  <rect x="40" y="120" width="260" height="220" class="box"/>
  <text x="60" y="150" class="label">Client (Browser)</text>
  <text x="60" y="175" class="text">• Landing/Login (ID/Passport)</text>
  <text x="60" y="195" class="text">• Dashboard</text>
  <text x="60" y="215" class="text">• My Identity</text>
  <text x="60" y="235" class="text">• Debts &amp; Liabilities</text>
  <text x="60" y="255" class="text">• Financial Rehab</text>
  <text x="60" y="275" class="text">• Get Help</text>
  <text x="60" y="305" class="text">httpOnly session cookie</text>

  <rect x="360" y="120" width="420" height="300" class="core"/>
  <text x="380" y="150" class="label">Next.js App (Server + UI)</text>
  <text x="380" y="175" class="text">Route Groups: /, /dashboard, /identity, /debts, /rehab, /help</text>
  <text x="380" y="195" class="text">Middleware: cookie guard for protected routes</text>
  <text x="380" y="225" class="text">Service Modules:</text>
  <text x="400" y="245" class="text">1) Authentication/Session Service</text>
  <text x="400" y="265" class="text">2) Profile Service (My Identity)</text>
  <text x="400" y="285" class="text">3) Debt Service (add/list/update)</text>
  <text x="400" y="305" class="text">4) Dashboard Aggregation Service</text>
  <text x="400" y="325" class="text">5) Rehab Recommendation Service</text>
  <text x="400" y="345" class="text">6) Help/Consultation Service</text>
  <text x="400" y="365" class="text">7) PDF Overview Service</text>
  <text x="380" y="395" class="text">Validation: Zod (forms + API input)</text>

  <rect x="360" y="460" width="420" height="180" class="box"/>
  <text x="380" y="490" class="label">API/Server Actions Layer</text>
  <text x="380" y="515" class="text">POST /api/ai-recommendations</text>
  <text x="380" y="535" class="text">POST /api/pdf/overview</text>
  <text x="380" y="555" class="text">Consultation create + history fetch</text>
  <text x="380" y="575" class="text">Risk simulation (ID ends: 999/555/other)</text>
  <text x="380" y="595" class="text">No debt delete endpoint (enforced)</text>

  <rect x="860" y="120" width="470" height="260" class="data"/>
  <text x="880" y="150" class="label">Data Layer (Prisma + SQLite)</text>
  <text x="880" y="180" class="text">UserProfile</text>
  <text x="900" y="200" class="text">- id, fullName, idNumberOrPassport, employmentStatus</text>
  <text x="900" y="220" class="text">- monthlyIncome, realAge, creditScore, riskStatus</text>
  <text x="880" y="245" class="text">DebtAccount (FK userId)</text>
  <text x="900" y="265" class="text">- creditorName, debtType, interestRate, balance</text>
  <text x="900" y="285" class="text">- monthlyObligation, status, missedPaymentsCount</text>
  <text x="900" y="305" class="text">- hasLegalJudgment</text>
  <text x="880" y="330" class="text">ConsultationRequest (FK userId)</text>
  <text x="900" y="350" class="text">- assistanceType, message, providerWhatsAppNumber, status</text>

  <rect x="860" y="430" width="220" height="120" class="ext"/>
  <text x="880" y="460" class="label">OpenAI API</text>
  <text x="880" y="485" class="text">LLM recommendations</text>
  <text x="880" y="505" class="text">Fallback if key missing</text>

  <rect x="1110" y="430" width="220" height="120" class="ext"/>
  <text x="1130" y="460" class="label">WhatsApp wa.me</text>
  <text x="1130" y="485" class="text">Click-to-chat URL only</text>
  <text x="1130" y="505" class="text">(no auto-send claim)</text>

  <rect x="860" y="590" width="470" height="130" class="warn"/>
  <text x="880" y="620" class="label">PDF Protection Model</text>
  <text x="880" y="645" class="text">Password gate (ID/Passport or saved password) before generation</text>
  <text x="880" y="665" class="text">Watermark: “Protected – requires ID to access”</text>
  <text x="880" y="685" class="text">Note: not true cryptographic PDF encryption in prototype mode</text>

  <path d="M300 220 L360 220" class="line"/>
  <path d="M570 420 L570 460" class="line"/>
  <path d="M780 250 L860 250" class="line"/>
  <path d="M780 520 L860 490" class="line"/>
  <path d="M780 540 L1110 490" class="line"/>
  <path d="M780 610 L860 650" class="line"/>
</svg>
